<!DOCTYPE html>
<html lang="en">
    <head>
        <title>AJAX Practice</title>
        <meta name="author" content="Rita Abraham">
        <meta name="description" content="AJAX Practice for Rita Abraham">
    </head>
    <body>
        <form style="display: flex; flex-direction: column; gap: 5px;">
                <label for="id">Record ID:</label>
                <input type="number" name="id" id="id" required>
                <label for="article_name">Article Name</label>
                <input type="text" name="article_name" id="article_name" required>
                <label for="article_body">Article Body:</label>
                <textarea id="article_body" placeholder="Please add a body" cols=50 rows=10 required></textarea>
                <label for="current_date" hidden>Date:</label>
                <input type="text" name="current_date" id="current_date" readonly hidden>
        </form>
        <button id="postBtn">POST</button>
        <button id="getBtn">GET</button>
        <button id="deleteBtn">DELETE</button>
        <button id="putBtn">PUT</button>
        <br>
        <output id="result"></output>
        <script type="module">
            import {get, post, put, delete_req} from './methodtest.js';
            let post_button = document.getElementById("postBtn");
            let get_button = document.getElementById("getBtn");
            let delete_button = document.getElementById("deleteBtn");
            let put_button = document.getElementById("putBtn");
            let id = document.getElementById("id");
            let article_name = document.getElementById("article_name");
            let article_body = document.getElementById("article_body");
            let current_date = document.getElementById("current_date");
            let output = document.getElementById("result");
            post_button.addEventListener('click', () => {
                current_date.value = new Date();
                let json_obj = {
                    articleTitle: article_name.value,
                    articleBody: article_body.value,
                    date: current_date.value
                };
                let json_stringify = JSON.stringify(json_obj);
                post(output, json_stringify);
            });
            get_button.addEventListener('click', () => {
                get(output, id.value);
            });
            put_button.addEventListener('click', () => {
                current_date.value = new Date();
                let json_obj = {
                    articleTitle: article_name.value,
                    articleBody: article_body.value,
                    date: current_date.value
                };
                let json_stringify = JSON.stringify(json_obj);
                put(output, json_stringify);
            });
            delete_button.addEventListener('click', () => {
                const xhr = new XMLHttpRequest();
                let json_obj = {
                    id: id.value
                };
                delete_req(output, id.value);
            });
        </script>
    </body>
</html>


